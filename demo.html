<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>demo</title>
<meta content="user-scalable=no,initial-scale=1,maximum-scale=1,width=device-width" name="viewport">
<style type="text/css">
	*{margin: 0; padding: 0;}
	.showDiv{background-color: red; height: 20px; width: 0%;}
	button{padding: 5px; border-radius: 5px; display: block; margin: 5px;}

</style>
<script type="text/javascript" src="1.0.5/mobile.js"></script>
</head>
<body>
<p class="show"></p>
<button class="btn">是否为手机</button>
<p class="show"></p>
<button class="btn">是否在微信</button>
<p class="show"></p>
<button class="btn">是否为Android系统</button>
<p class="show"></p>
<button class="btn">是否为Ios系统</button>
<p class="show"></p>
<button class="btn">是否为UC</button>
<p class="show"></p>
<button class="btn">是否为UC极速模式</button>

<p class="showCookie">cookie需在服务器中使用</p>
<input class="cookieInput" type="text" value="" placeholder="请输入添加cookie的名字">
<input class="cookieInput" type="text" value="" placeholder="请输入添加cookie的值">
<button class="btnCookie">添加cookie</button>
<input class="cookieInput" type="text" value="" placeholder="请输入删除cookie的名字">
<button class="btnCookie">删除cookie</button>
<input class="cookieInput" type="text" value="" placeholder="请输入获取cookie的名字">
<button class="btnCookie">获取cookie</button>

<div class="showDiv"></div>
<button class="showDivBtn">SetTime开始</button>
<br/>

<script type="text/javascript">
(function (){
	//Mobile.setTime 	-> 向下兼容不支持requestAnimationFrame的安卓手机
	function showSetTime(){
		var oBtn = document.querySelector('.showDivBtn');
		var oBox = document.querySelector('.showDiv');
		var iNow = 0;
		var ready = false;
		var timer ;
		oBtn.addEventListener('click', function (){
			if (!ready) {
				ready = true;
				this.innerHTML = 'SetTime暂停';

				timer = Mobile.setTime(base);
				//timer = window.requestAnimationFrame(base);
			}else{
				ready= false;
				this.innerHTML = 'SetTime开始';

				Mobile.clearTime(timer);
				//window['cancelAnimationFrame'](timer)
			};
		
		}, false);

		function base(){
			iNow++;
			oBox.innerHTML = iNow + '%';
			oBox.style.width = iNow + '%';
			if (iNow < 100) {

				timer = Mobile.setTime(base);
				//timer = window.requestAnimationFrame(base);
			}else{
				iNow = 0;
			};
		}
	}

	//Mobile.is……
	function showIs(){
		var aBtn = document.querySelectorAll('.btn');
		var aP = document.querySelectorAll('.show');
		var arrEffect = ['isMobile','isWeixin','isAndroid','isIos','isUC','isUCFast'];
		for (var i = 0; i < aBtn.length; i++) {
			(function (index){
				aBtn[i].addEventListener('click', function (){
					aP[index].innerHTML = Mobile[arrEffect[index]]();
				}, false);
			})(i);
		};
	}

	//Mobile cookie 	-> 推荐用localStorage
	function showCookie(){
		var aInput = document.querySelectorAll('.cookieInput');
		var oDiv = document.querySelector('.showCookie');
		var aBtn = document.querySelectorAll('.btnCookie');

		//添加
		aBtn[0].addEventListener('click', function (){
			var name = aInput[0].value.trim();
			var value = aInput[1].value.trim();

			if (!name) {
				oDiv.innerHTML = '请输入添加cookie的名字';
				return false;
			};
			if (!value) {
				oDiv.innerHTML = '请输入添加cookie的值';
				return false;
			};
			Mobile.addCookie(name, value, 14);
			oDiv.innerHTML = '已添加cookie: ' + name + '=' + value + ',有效期14天';
		}, false);

		//删除
		aBtn[1].addEventListener('click', function (){
			var name = aInput[2].value.trim();

			if (!name) {
				oDiv.innerHTML = '请输入删除cookie的名字';
				return false;
			};
			Mobile.removeCookie(name);
			oDiv.innerHTML = '已删除cookie: ' + name;
		}, false);

		//获取
		aBtn[2].addEventListener('click', function (){
			var name = aInput[3].value.trim();

			if (!name) {
				oDiv.innerHTML = '请输入获取cookie的名字';
				return false;
			};
			var value = Mobile.getCookie(name);
			if (value === '') {value = '空'};
			oDiv.innerHTML = '获取cookie: ' + name + '的值为' + value + '';
		})
	}



	init()
	function init(){
		showSetTime();
		showIs();
		showCookie()
	}
})();
</script>
</body>
</html>